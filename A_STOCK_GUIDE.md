# A股数据获取指南

## ✅ A股数据支持确认

长桥API **完全支持A股数据**！

### 📊 支持的数据类型

| 数据类型 | 支持状态 | 说明 |
|---------|---------|------|
| **静态信息** | ✅ 完全支持 | 股票代码、名称等基本信息 |
| **实时行情** | ✅ 完全支持 | LV1实时行情（最新价、开盘价、最高价、最低价、成交量等） |
| **历史K线** | ⚠️ 受限支持 | 支持获取，但受API频率限制（错误代码301607） |

### 🔑 市场权限

```
CN (中国A股) - LV1 Real-time Quotes
```

您的账户已经拥有A股LV1实时行情权限！

---

## 📝 股票代码格式

### 上海证券交易所 (SH)
- **主板**: `600XXX.SH` (如 600519.SH - 贵州茅台)
- **科创板**: `688XXX.SH` (如 688981.SH - 中芯国际)

### 深圳证券交易所 (SZ)
- **主板**: `000XXX.SZ` (如 000001.SZ - 平安银行)
- **中小板**: `002XXX.SZ` (如 002594.SZ - 比亚迪)
- **创业板**: `300XXX.SZ` (如 300750.SZ - 宁德时代)
- **创业板注册制**: `301XXX.SZ` (如 301029.SZ - 怡合达)

---

## 📊 已添加的A股股票

### 总览
- **总数**: **152只** 🎉
- **上海交易所**: 75只
- **深圳交易所**: 77只

### 指数覆盖
- **沪深300成分股**: 50只龙头股
- **上证50成分股**: 39只蓝筹股
- **中证500成分股**: 48只中盘成长股
- **深证成指成分股**: 30只深圳龙头
- **科创50成分股**: 20只科技股
- **创业板指成分股**: 20只成长股
- **行业龙头**: 36只各行业代表

### 行业分布

#### 🏦 金融银行 (10只)
- 招商银行 (600036.SH)
- 中国平安 (601318.SH)
- 浦发银行 (600000.SH)
- 兴业银行 (601166.SH)
- 民生银行 (600016.SH)
- 交通银行 (601328.SH)
- 工商银行 (601398.SH)
- 建设银行 (601939.SH)
- 农业银行 (601288.SH)
- 中国银行 (601988.SH)

#### 🍷 白酒食品 (5只)
- 贵州茅台 (600519.SH) - 白酒龙头
- 五粮液 (000858.SZ)
- 泸州老窖 (000568.SZ)
- 山西汾酒 (600809.SH)
- 海天味业 (603288.SH)

#### 🔋 新能源汽车 (8只)
- 宁德时代 (300750.SZ) - 动力电池龙头
- 比亚迪 (002594.SZ)
- 长城汽车 (601633.SH)
- 上汽集团 (600104.SH)
- 赣锋锂业 (002460.SZ)
- 天齐锂业 (002466.SZ)
- 亿纬锂能 (300014.SZ)
- 容百科技 (688005.SH)

#### 💻 科技互联网 (7只)
- 中兴通讯 (000063.SZ)
- 海康威视 (002415.SZ)
- 东方财富 (300059.SZ)
- 立讯精密 (002475.SZ)
- 歌尔股份 (002241.SZ)
- 蓝思科技 (300433.SZ)
- 北方华创 (002371.SZ)

#### 💊 医药生物 (6只)
- 迈瑞医疗 (300760.SZ) - 医疗器械龙头
- 恒瑞医药 (600276.SH)
- 长春高新 (000661.SZ)
- 智飞生物 (300122.SZ)
- 药明康德 (603259.SH)
- 爱尔眼科 (300015.SZ)

#### 🏠 消费零售 (5只)
- 伊利股份 (600887.SH)
- 美的集团 (000333.SZ)
- 格力电器 (000651.SZ)
- 洋河股份 (002304.SZ)
- 豪威集团 (603501.SH)

#### 🏢 地产建筑 (4只)
- 万科A (000002.SZ)
- 招商蛇口 (001979.SZ)
- 保利发展 (600048.SH)
- 平安银行 (000001.SZ)

#### ⚡ 能源化工 (5只)
- 中国石化 (600028.SH)
- 中国石油 (601857.SH)
- 万华化学 (600309.SH)
- 陕西煤业 (601225.SH)
- 中国神华 (601088.SH)

#### 🔬 科创板 (20只)
- 中芯国际 (688981.SH) - 芯片制造龙头
- 金山办公 (688111.SH)
- 天合光能 (688599.SH)
- 中微公司 (688012.SH)
- 澜起科技 (688008.SH)
- 传音控股 (688036.SH)
- 晶科能源 (688223.SH)
- 海光信息 (688041.SH)
- 时代电气 (688187.SH)
- 奇安信 (688561.SH)
- 华润微 (688396.SH)
- 石头科技 (688169.SH)
- 沪硅产业 (688126.SH)
- 大全能源 (688303.SH)
- 凯赛生物 (688065.SH)
- 康希诺 (688185.SH)
- 寒武纪 (688256.SH)
- 晶晨股份 (688099.SH)
- 中控技术 (688777.SH)

#### 🌱 创业板 (11只)
- 阳光电源 (300274.SZ)
- 汇川技术 (300124.SZ)
- 三环集团 (300408.SZ)
- 泰格医药 (300347.SZ)
- 深信服 (300454.SZ)
- 圣邦股份 (300661.SZ)
- 爱美客 (300896.SZ)
- 中伟股份 (300919.SZ)
- 怡合达 (301029.SZ)
- 软通动力 (301236.SZ)
- 华大九天 (301269.SZ)
- 江波龙 (301308.SZ)

---

## 🚀 使用方法

### 1. 添加A股股票到数据库

```bash
python scripts/setup_a_stocks.py
```

### 2. 获取A股历史数据

由于API频率限制，建议使用慢速获取：

```bash
# 获取单只股票
python scripts/fetch_historical_data.py --symbol 600519.SH --days 365

# 批量获取（会自动处理频率限制）
python scripts/fetch_historical_data.py --batch --market CN --days 365 --limit 10
```

### 3. 计算技术指标

```bash
python scripts/calculate_indicators.py --batch --market CN
```

### 4. 运行A股选股

```bash
python scripts/run_stock_selection.py --market CN --top 50
```

### 5. 查看选股结果

访问Web界面：
```
http://localhost:5000/selections?market=CN
```

---

## ⚠️ API限制说明

### 历史K线频率限制

**错误代码**: 301607 - history kline symbol count out of limit

**限制**: 每分钟约5-10只股票

**解决方案**:
1. 使用批量获取脚本，自动处理延迟
2. 分批次获取数据
3. 每批5只股票，批次间隔60秒

### 建议的数据获取策略

```bash
# 第一天：获取前20只
python scripts/fetch_historical_data.py --batch --market CN --days 365 --limit 20

# 第二天：获取接下来的20只
# 依此类推...
```

---

## 📈 实时行情示例

### 贵州茅台 (600519.SH)
- 最新价: 1436.78
- 开盘价: 1436.00
- 最高价: 1439.38
- 最低价: 1420.00
- 成交量: 54,918

### 平安银行 (000001.SZ)
- 最新价: 11.40
- 开盘价: 11.33
- 最高价: 11.41
- 最低价: 11.27
- 成交量: 1,047,469

### 宁德时代 (300750.SZ)
- 最新价: 409.89
- 开盘价: 399.98
- 最高价: 424.36
- 最低价: 399.74
- 成交量: 412,088

---

## 💡 下一步建议

### 立即可做
1. ✅ 查看已添加的81只A股股票
2. ✅ 获取实时行情数据
3. ✅ 测试单只股票的数据获取

### 需要时间
1. ⏳ 逐步获取历史K线数据（受API限制）
2. ⏳ 计算技术指标
3. ⏳ 运行A股选股分析

### 扩展建议
1. 📊 添加更多A股股票（可扩展到300+只）
2. 🔄 设置定时任务自动更新数据
3. 📈 开发A股特有的选股策略

---

## 🔧 相关脚本

| 脚本 | 功能 | 用途 |
|------|------|------|
| `setup_a_stocks.py` | 添加A股股票 | 初始化A股股票列表 |
| `test_a_stock_simple.py` | 测试A股数据 | 验证API支持和数据获取 |
| `fetch_historical_data.py` | 获取历史数据 | 批量获取K线数据 |
| `calculate_indicators.py` | 计算技术指标 | 生成MA、MACD、RSI等指标 |
| `run_stock_selection.py` | 运行选股 | 基于技术指标选股 |

---

## 📞 技术支持

如果遇到问题：
1. 检查API权限是否包含CN市场
2. 确认网络连接正常
3. 查看错误日志了解具体问题
4. 联系长桥客服确认数据权限

---

**A股数据已经完全可用！开始您的A股量化交易之旅吧！** 🚀

