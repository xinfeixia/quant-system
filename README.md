# é•¿æ¡¥è¯åˆ¸é‡åŒ–äº¤æ˜“åˆ†æç³»ç»Ÿ

åŸºäºé•¿æ¡¥è¯åˆ¸ï¼ˆLongPortï¼‰OpenAPIçš„æ¸¯è‚¡ã€ç¾è‚¡é‡åŒ–äº¤æ˜“åˆ†æç³»ç»Ÿã€‚

## ğŸ“Š ç³»ç»Ÿç‰¹ç‚¹

- **å¤šå¸‚åœºæ”¯æŒ**ï¼šæ¸¯è‚¡ã€ç¾è‚¡ã€Aè‚¡æ•°æ®é‡‡é›†
- **å®æ—¶è¡Œæƒ…**ï¼šæ”¯æŒå®æ—¶è¡Œæƒ…è®¢é˜…å’Œæ¨é€
- **å†å²æ•°æ®**ï¼šè·å–å†å²Kçº¿æ•°æ®ï¼ˆæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿ç­‰ï¼‰
- **æŠ€æœ¯åˆ†æ**ï¼š20+æŠ€æœ¯æŒ‡æ ‡ï¼ˆMACDã€KDJã€RSIã€å¸ƒæ—å¸¦ç­‰ï¼‰
- **æ™ºèƒ½é€‰è‚¡**ï¼šå¤šç»´åº¦è¯„åˆ†ç³»ç»Ÿ
- **å›æµ‹ç³»ç»Ÿ**ï¼šéªŒè¯ç­–ç•¥å†å²è¡¨ç°
- **Webå¯è§†åŒ–**ï¼šäº¤äº’å¼å›¾è¡¨å’Œæ•°æ®å±•ç¤º

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
longport-quant-system/
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml        # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ api_config.yaml    # APIå¯†é’¥é…ç½®
â”œâ”€â”€ data_collection/       # æ•°æ®é‡‡é›†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ longport_client.py # é•¿æ¡¥APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ quote_fetcher.py   # è¡Œæƒ…æ•°æ®è·å–
â”‚   â””â”€â”€ realtime_stream.py # å®æ—¶è¡Œæƒ…è®¢é˜…
â”œâ”€â”€ database/              # æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py          # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ db_manager.py      # æ•°æ®åº“ç®¡ç†
â”œâ”€â”€ analysis/              # åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ technical_indicators.py  # æŠ€æœ¯æŒ‡æ ‡
â”‚   â”œâ”€â”€ scoring_engine.py        # è¯„åˆ†å¼•æ“
â”‚   â””â”€â”€ pattern_recognition.py   # å½¢æ€è¯†åˆ«
â”œâ”€â”€ backtest/              # å›æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ backtest_engine.py # å›æµ‹å¼•æ“
â”‚   â””â”€â”€ strategy.py        # ç­–ç•¥å®šä¹‰
â”œâ”€â”€ web/                   # Webç•Œé¢
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ app.py            # Flaskåº”ç”¨
â”‚   â”œâ”€â”€ routes.py         # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ templates/        # HTMLæ¨¡æ¿
â”‚       â”œâ”€â”€ base.html
â”‚       â”œâ”€â”€ dashboard.html
â”‚       â”œâ”€â”€ analysis.html
â”‚       â””â”€â”€ stock_detail.html
â”œâ”€â”€ utils/                 # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config_loader.py  # é…ç½®åŠ è½½
â”‚   â””â”€â”€ logger.py         # æ—¥å¿—å·¥å…·
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ fetch_stock_list.py    # è·å–è‚¡ç¥¨åˆ—è¡¨
â”‚   â”œâ”€â”€ fetch_historical_data.py # è·å–å†å²æ•°æ®
â”‚   â””â”€â”€ run_analysis.py        # è¿è¡Œåˆ†æ
â”œâ”€â”€ logs/                  # æ—¥å¿—ç›®å½•
â”œâ”€â”€ data/                  # æ•°æ®ç›®å½•
â”œâ”€â”€ requirements.txt       # ä¾èµ–åŒ…
â”œâ”€â”€ README.md             # è¯´æ˜æ–‡æ¡£
â””â”€â”€ run.py                # ä¸»è¿è¡Œè„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®APIå¯†é’¥

è®¿é—® [é•¿æ¡¥å¼€å‘è€…å¹³å°](https://open.longportapp.com) ç”³è¯·APIæƒé™ï¼Œè·å–ï¼š
- App Key
- App Secret
- Access Token

ç¼–è¾‘ `config/api_config.yaml`ï¼š

```yaml
longport:
  app_key: "your_app_key_here"
  app_secret: "your_app_secret_here"
  access_token: "your_access_token_here"
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
python scripts/init_database.py
```

### 4. è·å–è‚¡ç¥¨åˆ—è¡¨

```bash
# è·å–æ¸¯è‚¡åˆ—è¡¨
python scripts/fetch_stock_list.py --market HK

# è·å–ç¾è‚¡åˆ—è¡¨
python scripts/fetch_stock_list.py --market US
```

### 5. è·å–å†å²æ•°æ®

```bash
# è·å–æŒ‡å®šè‚¡ç¥¨çš„å†å²æ•°æ®
python scripts/fetch_historical_data.py --symbol 700.HK --days 365

# æ‰¹é‡è·å–
python scripts/fetch_historical_data.py --batch --market HK --limit 100
```

### 6. è¿è¡Œé€‰è‚¡åˆ†æ

```bash
python scripts/run_analysis.py --market HK --top 50
```

### 7. å¯åŠ¨Webç•Œé¢

```bash
python run.py
```

è®¿é—® http://localhost:5000 æŸ¥çœ‹å¯è§†åŒ–ç•Œé¢

## ğŸ“ˆ åŠŸèƒ½è¯´æ˜

### æ•°æ®é‡‡é›†

- **è‚¡ç¥¨åˆ—è¡¨**ï¼šè·å–æ¸¯è‚¡ã€ç¾è‚¡ã€Aè‚¡çš„è‚¡ç¥¨åˆ—è¡¨
- **å†å²Kçº¿**ï¼šæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿ã€åˆ†é’Ÿçº¿æ•°æ®
- **å®æ—¶è¡Œæƒ…**ï¼šWebSocketå®æ—¶æ¨é€
- **åŸºæœ¬ä¿¡æ¯**ï¼šè‚¡ç¥¨åç§°ã€è¡Œä¸šã€å¸‚å€¼ç­‰

### æŠ€æœ¯åˆ†æ

æ”¯æŒçš„æŠ€æœ¯æŒ‡æ ‡ï¼š
- **è¶‹åŠ¿æŒ‡æ ‡**ï¼šMAã€EMAã€MACD
- **éœ‡è¡æŒ‡æ ‡**ï¼šRSIã€KDJã€CCI
- **æ³¢åŠ¨æŒ‡æ ‡**ï¼šå¸ƒæ—å¸¦ã€ATR
- **æˆäº¤é‡æŒ‡æ ‡**ï¼šOBVã€æˆäº¤é‡MA

### é€‰è‚¡ç­–ç•¥

å¤šç»´åº¦è¯„åˆ†ç³»ç»Ÿï¼š
- **æŠ€æœ¯æŒ‡æ ‡åˆ†**ï¼ˆ30%ï¼‰ï¼šMACDã€KDJã€RSIç­‰
- **é‡ä»·åˆ†æåˆ†**ï¼ˆ25%ï¼‰ï¼šæ”¾é‡ä¸Šæ¶¨ã€ç¼©é‡ä¸‹è·Œ
- **è¶‹åŠ¿åˆ†æåˆ†**ï¼ˆ25%ï¼‰ï¼šä¸Šå‡è¶‹åŠ¿ã€çªç ´ä¿¡å·
- **å½¢æ€è¯†åˆ«åˆ†**ï¼ˆ20%ï¼‰ï¼šç»å…¸Kçº¿å½¢æ€

### å›æµ‹ç³»ç»Ÿ

- **ç­–ç•¥å›æµ‹**ï¼šéªŒè¯é€‰è‚¡ç­–ç•¥å†å²è¡¨ç°
- **æ€§èƒ½æŒ‡æ ‡**ï¼šæ”¶ç›Šç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤
- **äº¤æ˜“ç»Ÿè®¡**ï¼šèƒœç‡ã€ç›ˆäºæ¯”ã€äº¤æ˜“æ¬¡æ•°
- **å¯è§†åŒ–**ï¼šå‡€å€¼æ›²çº¿ã€å›æ’¤æ›²çº¿

## ğŸ”§ é…ç½®è¯´æ˜

### config/config.yaml

```yaml
# æ•°æ®åº“é…ç½®
database:
  type: sqlite  # sqlite æˆ– postgresql
  path: data/longport_quant.db  # SQLiteè·¯å¾„
  # PostgreSQLé…ç½®ï¼ˆå¯é€‰ï¼‰
  # host: localhost
  # port: 5432
  # database: longport_quant
  # user: postgres
  # password: your_password

# æ•°æ®é‡‡é›†é…ç½®
data_collection:
  markets:
    - HK  # æ¸¯è‚¡
    - US  # ç¾è‚¡
  update_interval: 3600  # æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
  batch_size: 50  # æ‰¹é‡è·å–æ•°é‡

# åˆ†æé…ç½®
analysis:
  technical_indicators:
    - MACD
    - KDJ
    - RSI
    - BOLL
  scoring_weights:
    technical: 0.30
    volume: 0.25
    trend: 0.25
    pattern: 0.20

# å›æµ‹é…ç½®
backtest:
  initial_capital: 1000000  # åˆå§‹èµ„é‡‘
  commission: 0.0003  # æ‰‹ç»­è´¹ç‡
  slippage: 0.001  # æ»‘ç‚¹

# Webé…ç½®
web:
  host: 0.0.0.0
  port: 5000
  debug: false
```

## ğŸ“Š APIé™åˆ¶

é•¿æ¡¥OpenAPIçš„é™åˆ¶ï¼š
- **è¡Œæƒ…æƒé™**ï¼šéœ€è¦ç”³è¯·è¡Œæƒ…æƒé™
- **è¯·æ±‚é¢‘ç‡**ï¼šæ ¹æ®è´¦æˆ·ç­‰çº§æœ‰ä¸åŒé™åˆ¶
- **æ•°æ®å»¶è¿Ÿ**ï¼šå®æ—¶è¡Œæƒ…å¯èƒ½æœ‰å»¶è¿Ÿ

è¯¦è§ï¼šhttps://open.longportapp.com/docs

## âš ï¸ é£é™©æç¤º

- æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨
- ä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®
- è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…
- è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„

## ğŸ“ å¼€å‘è®¡åˆ’

- [x] é¡¹ç›®æ¡†æ¶æ­å»º
- [x] é•¿æ¡¥APIé›†æˆ
- [x] æ•°æ®åº“è®¾è®¡
- [ ] æ•°æ®é‡‡é›†æ¨¡å—
- [ ] æŠ€æœ¯åˆ†ææ¨¡å—
- [ ] é€‰è‚¡å¼•æ“
- [ ] å›æµ‹ç³»ç»Ÿ
- [ ] Webå¯è§†åŒ–
- [ ] å®æ—¶è¡Œæƒ…æ¨é€
- [ ] ç­–ç•¥ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueæˆ–è”ç³»å¼€å‘è€…ã€‚

